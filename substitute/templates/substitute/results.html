{% extends 'substitute/base.html' %}

{% block title %}

    Résultats pour {{ query }}

{% endblock %}


{% block header %}

    {% include 'substitute/header.html' with title=query %}

{% endblock %}


{% block content %}

<section class="container" id="substitutes">
    {% if not query %}
        <p class="text-center" style="font-weight: bold">Vous devez renseigner un aliment</p>
    {% elif not substitutes %}
        <p id="count" style="font-style: italic">{{ count }} résultats</p>
        {% if my_products %}
            <p class="text-center" style="font-weight: bold">Vous n'avez pas encore enregistré de produits</p>
        {% else %}
            <p class="text-center" style="font-weight: bold">Nous n'avons pas trouvé de substituts saints pour votre requête</p>
        {% endif %}
    {% else %}
        <p id="count" style="font-style: italic">{{ count }} résultats</p>
        {% if not my_products %}
            <h4 class="text-center">Vous pouvez remplacer cet aliment par:</h4>
        {% endif %}
        <br>
        <div class="container text-center">
            <div class="row">
                {% for substitute in substitutes %}

                <div class="col-sm-4 text-center">
                    <a href="{% url 'substitute:details' product_id=substitute.id_product %}" class="substitute">
                        <img class="img-responsive rounded my-2" src="{{ substitute.picture }}" style="height:250px; width:150px" alt="{{ substitute.name }}">
                        <h5>{{ substitute.name }}</h5>
                    </a>
                    {% if my_products %}
                       <a href="{% url 'substitute:delete_product' product_id=substitute.id_product %}"><button id="delete_product" class="mx-auto mb-3 btn">SUPPRIMER</button></a>
                    {% endif %}
                </div>
            
                {% endfor %}
            </div>
        </div>
    {% endif %}
    
    {% if paginate %}
        <div class="mt-3">
            <nav aria-label="page navigation">
                <ul class="pagination">
                    {% if substitutes.has_previous %}
                        <li><a class="btn btn-primary mx-1" href="/substitute/?query={{ query }}&page={{ substitutes.previous_page_number }}">Précédent</a></li>
                    {% endif %}
                    {% if substitutes.has_next %}
                        <li><a class="btn btn-primary mx-1" href="/substitute/?query={{ query }}&page={{ substitutes.next_page_number }}">Suivant</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    {% endif %}

</section>

{% endblock %}

{% comment %} {% block javascript %}
    <script>
    $("#delete_product").click(function () {
            var conf = confirm("Êtes-vous sûr de vouloir supprimer ce produit ?")
            if (conf===true){
                $("delete_product").attr("href", "{% url 'substitute:delete_product' product_id=substitute.id_product %}")
            }
        });
    </script>
{% endblock %} {% endcomment %}